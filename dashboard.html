<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CV Generator Dashboard</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              dark: '#0f172a',
              card: '#1e293b',
              primary: '#3b82f6',
              success: '#10b981',
            },
          },
        },
      }
    </script>
    <style>
      body {
        background-color: #0f172a;
        color: white;
        font-family: 'Inter', sans-serif;
      }
      .glass-card {
        background: rgba(30, 41, 59, 0.7);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
      .btn {
        transition: all 0.2s;
      }
      .btn:active {
        transform: scale(0.95);
      }
      .spinner {
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top: 3px solid white;
        width: 20px;
        height: 20px;
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body class="min-h-screen flex items-center justify-center p-6">
    <div class="max-w-4xl w-full">
      <!-- Header -->
      <header class="mb-10 text-center">
        <h1
          class="text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500 mb-2"
        >
          CV Generator
        </h1>
        <p class="text-slate-400">
          Generate your professional resumes with a single click.
        </p>
      </header>

      <!-- Notification Area -->
      <div
        id="notification"
        class="hidden mb-6 p-4 rounded-lg text-center transition-all duration-300"
      ></div>

      <!-- Cards Grid -->
      <div class="grid md:grid-cols-2 gap-8">
        <!-- Standard CV Card -->
        <div
          class="glass-card rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-shadow duration-300"
        >
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-2xl font-semibold text-white">Standard CV</h2>
            <span
              class="bg-blue-900 text-blue-200 text-xs px-2 py-1 rounded border border-blue-700"
              >Modern</span
            >
          </div>
          <p class="text-slate-400 mb-6 text-sm">
            The classic resume layout suited for most industry applications.
            Clean and concise.
          </p>

          <div class="space-y-3">
            <!-- Standard EN -->
            <div
              class="flex items-center justify-between bg-slate-800/50 p-3 rounded-lg border border-slate-700"
            >
              <div class="flex items-center">
                <span class="text-2xl mr-3">ðŸ‡ºðŸ‡¸</span>
                <span class="text-sm font-medium">English Version</span>
              </div>
              <button
                onclick="generateCV('standard', 'en', this)"
                class="btn bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2"
              >
                <span>Box Build</span>
              </button>
            </div>
            <!-- Standard ES -->
            <div
              class="flex items-center justify-between bg-slate-800/50 p-3 rounded-lg border border-slate-700"
            >
              <div class="flex items-center">
                <span class="text-2xl mr-3">ðŸ‡ªðŸ‡¸</span>
                <span class="text-sm font-medium">Spanish Version</span>
              </div>
              <button
                onclick="generateCV('standard', 'es', this)"
                class="btn bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2"
              >
                <span>Box Build</span>
              </button>
            </div>
          </div>

          <!-- Latest Output -->
          <div
            id="preview-standard"
            class="mt-4 hidden p-3 bg-green-900/20 border border-green-800 rounded-lg"
          >
            <p class="text-xs text-green-400 mb-2">âœ¨ Generation Successful</p>
            <a
              href="#"
              target="_blank"
              class="text-sm text-green-300 hover:text-white underline"
              >View PDF</a
            >
          </div>
        </div>

        <!-- Harvard CV Card -->
        <div
          class="glass-card rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-shadow duration-300 border-l-4 border-l-purple-500"
        >
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-2xl font-semibold text-white">Harvard CV</h2>
            <span
              class="bg-purple-900 text-purple-200 text-xs px-2 py-1 rounded border border-purple-700"
              >Academic</span
            >
          </div>
          <p class="text-slate-400 mb-6 text-sm">
            The prestigious XYZ method format, optimized for academic and elite
            corporate roles.
          </p>

          <div class="space-y-3">
            <!-- Harvard EN -->
            <div
              class="flex items-center justify-between bg-slate-800/50 p-3 rounded-lg border border-slate-700"
            >
              <div class="flex items-center">
                <span class="text-2xl mr-3">ðŸ‡ºðŸ‡¸</span>
                <span class="text-sm font-medium">English Version</span>
              </div>
              <button
                onclick="generateCV('harvard', 'en', this)"
                class="btn bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2"
              >
                <span>Box Build</span>
              </button>
            </div>
            <!-- Harvard ES -->
            <div
              class="flex items-center justify-between bg-slate-800/50 p-3 rounded-lg border border-slate-700"
            >
              <div class="flex items-center">
                <span class="text-2xl mr-3">ðŸ‡ªðŸ‡¸</span>
                <span class="text-sm font-medium">Spanish Version</span>
              </div>
              <button
                onclick="generateCV('harvard', 'es', this)"
                class="btn bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2"
              >
                <span>Box Build</span>
              </button>
            </div>
          </div>

          <!-- Latest Output -->
          <div
            id="preview-harvard"
            class="mt-4 hidden p-3 bg-green-900/20 border border-green-800 rounded-lg"
          >
            <p class="text-xs text-green-400 mb-2">âœ¨ Generation Successful</p>
            <a
              href="#"
              target="_blank"
              class="text-sm text-green-300 hover:text-white underline"
              >View PDF</a
            >
          </div>
        </div>
      </div>
    </div>

    <!-- Javascript -->
    <script>
      async function generateCV(type, lang, btn) {
        // UI State: Loading
        const originalText = btn.innerHTML
        btn.innerHTML = `<div class="spinner"></div> Generating...`
        btn.disabled = true
        btn.classList.add('opacity-75', 'cursor-not-allowed')

        try {
          const response = await fetch('/api/generate', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ type, lang }),
          })

          const data = await response.json()

          if (!data.success) {
            throw new Error(data.error || 'Unknown error occurred')
          }

          // Success UI
          showNotification('Successfully Generated!', 'success')
          updatePreview(type, data.file)
        } catch (error) {
          console.error(error)
          showNotification(`Error: ${error.message}`, 'error')
        } finally {
          // Reset UI
          btn.innerHTML = originalText
          btn.disabled = false
          btn.classList.remove('opacity-75', 'cursor-not-allowed')
        }
      }

      function updatePreview(type, filename) {
        const previewId =
          type === 'standard' ? 'preview-standard' : 'preview-harvard'
        const container = document.getElementById(previewId)
        const link = container.querySelector('a')

        link.href = filename
        link.innerText = `Download ${filename}`
        container.classList.remove('hidden')
      }

      function showNotification(message, type) {
        const el = document.getElementById('notification')
        el.innerText = message
        el.classList.remove(
          'hidden',
          'bg-red-500',
          'bg-green-500',
          'text-white',
        )

        if (type === 'error') {
          el.classList.add(
            'bg-red-500/20',
            'text-red-200',
            'border',
            'border-red-500',
          )
        } else {
          el.classList.add(
            'bg-green-500/20',
            'text-green-200',
            'border',
            'border-green-500',
          )
        }

        el.classList.remove('hidden')

        // Auto hide after 3 seconds
        setTimeout(() => {
          el.classList.add('hidden')
        }, 3000)
      }
    </script>
  </body>
</html>
